<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Aug 1, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ninja web framework - developing large web applications in Java becomes fun again. - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20120801" />
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/reyez/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../.." id="bannerLeft">
                <h2>Ninja web framework</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2012-08-01</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.6-SNAPSHOT</li>
                      
                
            
      
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
            
                                    <h3></h3>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
          </ul>
                        <h3>Learn</h3>
                  <ul>
                  <li class="none">
                          <a href="../documentation/getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
            <strong>Controller</strong>
          </li>
                  <li class="none">
                          <a href="../documentation/application_configuration.html" title="Configuration">Configuration</a>
            </li>
                  <li class="none">
                          <a href="../documentation/deployment.html" title="Deployment">Deployment</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="API">API</a>
            </li>
          </ul>
                        <h3>Get involved</h3>
                  <ul>
                  <li class="none">
                          <a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list">Mailing list</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/reyez/ninja" class="externalLink" title="Source code">Source code</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/reyez/ninja/issues" class="externalLink" title="Bug tracker">Bug tracker</a>
            </li>
          </ul>
                      
            
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Controller</h1><p>Controller are the &ldquo;C&rdquo; in the MVC paradigm.</p><p>As almost everything else in Ninja a controller in Ninja is just a simple
Java class that follows some little conventions.</p><h2>A really simple controller</h2><p>A really simple controller would look like:</p>
<pre class="prettyprint">  
    package controllers;

    @Singleton
    public class ApplicationController {
        
        public Result index() {
        
            return Results.html();
        }


    }
</pre><p>The important conventions are that a controller method must return a &ldquo;Result&rdquo;. A result
is in short just an object that holds response codes, content to render, headers and cookies
that should be returned to the visitors of your website.</p><p>By convention we put controllers into package &ldquo;controllers&rdquo;.</p><h2>Getting parameters into your controllers</h2><p>A controller usually not only renders stuff, but also takes some inputs and does something with them.</p><p>Let&rsquo;s say we got a route like that:
<pre class="prettyprint"><br/>
 router.GET().route(&ldquo;/user/{id}/{email}/userDashboard&rdquo;).with(ApplicationController.class, &ldquo;userDashboard&rdquo;);
</pre></p><p>&hellip; and the user visits that Url&hellip;</p>
<pre class="prettyprint">  
    /user/12345/my@email.com/userDashboard?debug=false
</pre><p>We then of course want to know id, email and the value of the debug query parameter.</p><p>In Ninja this is really simple and controller that can do so looks like:</p>
<pre class="prettyprint">  
    package controllers;

    @Singleton
    public class ApplicationController {
        
        public Result index(
                @PathParam("id") String id, 
                @PathParam("email") String email, 
                @Param("debug") String debug) {
                
            //do something with the parameters...
        }


    }
</pre><p>Method index now gets the contents of the path params and all query parameters.</p><h2>A note on encoding / decoding</h2><p>Encoding / Decoding of urls is not as easy as you think it is. Ninja tries to simplify everything
as much as possible, but as user of the Api you have to know what you are submitting to Ninja.</p><p>We recommend the following <a href="http://www.lunatech-research.com/archives/2009/02/03/what-every-web-developer-must-know-about-url-encoding">excellent article from Lunatech</a>
before you use encoding / decoding actively in your application.</p><p>In short: If you are using a controller like that:</p>
<pre class="prettyprint">  
    package controllers;

    @Singleton
    public class ApplicationController {
        
        public Result index(
                @PathParam("id") String id, 
                @PathParam("email") String email, 
                @Param("debug") String debug) {
                
            //do something with the parameters...
        }

    }
</pre><p>You can expect that String id and String debug are both correctly decoded values. This assumes that
you are encoding the values correctly on the client side. And encoding is different for
query parameters or stuff in the path.</p><p>Simple example that outlines some of the difficulties:
Think of a route &ldquo;/user/{id}/userDashboard&rdquo;.</p><p>Let&rsquo;s say your &ldquo;id&rdquo; is &ldquo;rootuser/domain&rdquo;. If you do not encode the slash in the middle you end up with a
Url like /user/rootuser/domain/userDashboard. And the this url does not match the route
because of the &ldquo;/&rdquo;.</p><p>Therefore you have to encode your id correctly. In that case it would be: rootuser%2Fdomain.
When the user then visits /user/rootuser%2Fdomain/userDashboard the route matches and
a @PathParam(&ldquo;id&rdquo;) would then be rootuser/domain as it is decoded by Ninja.</p><p>In principle it is really simple. But it is even simpler to mess encoding / decoding up.
The <a href="http://www.lunatech-research.com/archives/2009/02/03/what-every-web-developer-must-know-about-url-encoding">Lunatech article explains all pitfalls nicely</a>.</p><h2>Injecting stuff</h2><p>TODO</p><h2>Rendering stuff</h2><p>TODO</p><h2>Validation</h2><p>TODO</p>
                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2012.
          All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
